<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loyal Fashion - Premium Store</title>
<style>
:root { --primary: #ff3f6c; --dark: #282c3f; --light: #f5f5f6; }
body{background:#fff;font-family:Segoe UI, Arial;margin:0; overflow-x: hidden; color: var(--dark);}
.header{background:#fff; padding:10px 50px; display:flex; align-items:center; justify-content:space-between; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.05);}
.nav-links { display: flex; gap: 25px; font-weight: bold; font-size: 14px; }
.search-container { background: var(--light); padding: 8px 15px; border-radius: 4px; display: flex; align-items: center; width: 300px; }
.search-container input { background: none; border: none; outline: none; width: 100%; font-size: 13px; }
.action-icons { display: flex; align-items: center; gap: 20px; }
.icon-btn { text-align: center; cursor: pointer; position: relative; font-size: 12px; font-weight: bold; }
.avatar-circle { width:32px; height:32px; background:var(--dark); color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:16px; margin: 0 auto; }
.banner-container { width: 100%; height: 350px; overflow: hidden; position: relative; background: #eee; }
.banner-slide { width: 100%; height: 100%; object-fit: cover; display: none; }
.banner-slide.active { display: block; }
.product-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:30px; padding:40px 50px;}
.product-card{background:#fff; text-align:left; cursor: pointer;}
.product-card img{width:100%; height:280px; object-fit:cover; border-radius:4px;}
#profileSidebar { position: fixed; top: 0; right: -350px; width: 300px; height: 100%; background: white; box-shadow: -5px 0 15px rgba(0,0,0,0.1); z-index: 4000; transition: 0.4s; padding: 25px; }
.modal { display:none; position:fixed; top:30%; left:50%; transform:translateX(-50%); background:white; padding:25px; border-radius:8px; box-shadow:0 10px 25px rgba(0,0,0,0.2); z-index: 3000; width: 300px;}
#cartCount { background: var(--primary); color: white; padding: 2px 6px; border-radius: 50%; font-size: 10px; position: absolute; top: -8px; right: 5px; }
</style>
</head>
<body>

<div class="header">
    <div style="display:flex; align-items:center; gap:10px;" onclick="location.reload()">
        <b>LOYAL FASHION</b>
    </div>
    <div class="nav-links"><span>MEN</span><span>WOMEN</span><span>KIDS</span></div>
    <div class="search-container"><input type="text" placeholder="Search for products, brands and more"></div>
    <div class="action-icons">
        <div class="icon-btn" id="loginBtn" onclick="openLogin()">ðŸ‘¤<br>Login</div>
        <div class="icon-btn" id="userInfo" style="display:none;" onclick="openProfile()">
            <div class="avatar-circle" id="userLetter"></div><span id="userName">Profile</span>
        </div>
        <div class="icon-btn" onclick="window.location.href='cart.html'">ðŸ›’<span id="cartCount">0</span><br>Cart</div>
    </div>
</div>

<div class="banner-container">
    <img src="https://assets.ajio.com/cms/AJIO/WEB/D-1.0-UHP-21022025-MainBanner-Z1-P5-5090.jpg" class="banner-slide active">
    <img src="https://assets.ajio.com/cms/AJIO/WEB/D-1.0-UHP-21022025-MainBanner-Z1-P2-AdidasPuma-Min40.jpg" class="banner-slide">
</div>

<div class="product-grid" id="product-list"></div>

<div id="profileSidebar">
    <button onclick="closeProfile()" style="float:right; border:none; background:none; font-size:20px; cursor:pointer;">âœ–</button>
    <div style="text-align:center; margin-top:30px;">
        <div id="sideLetter" style="width:60px; height:60px; background:var(--primary); color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px; font-weight:bold; margin:0 auto;"></div>
    </div>
    <hr style="margin:20px 0; border:0; border-top:1px solid #eee;">
    <input type="text" id="sideName" placeholder="Full Name" style="width:90%; padding:10px; margin-bottom:10px;">
    <input type="number" id="sideMobile" placeholder="Mobile" style="width:90%; padding:10px; margin-bottom:10px;">
    <textarea id="sideAddress" rows="3" placeholder="Address" style="width:90%; padding:10px; margin-bottom:10px;"></textarea>
    <button onclick="saveProfile()" style="background:var(--primary); color:white; border:none; padding:12px; width:100%; font-weight:bold; cursor:pointer;">SAVE</button>
    <button onclick="auth.signOut().then(()=>location.reload())" style="margin-top:20px; color:red; background:none; border:none; cursor:pointer; width:100%;">Logout</button>
</div>

<div class="modal" id="loginBox">
    <h3 style="margin:0 0 15px 0;">Login or Signup</h3>
    <input type="email" id="email" placeholder="Enter Email" style="width:90%; padding:10px; margin-bottom:10px;">
    <input type="password" id="password" placeholder="Password" style="width:90%; padding:10px; margin-bottom:10px;">
    <button onclick="login()" style="width:100%; background:var(--primary); color:white; border:none; padding:12px; cursor:pointer; font-weight:bold;">CONTINUE</button>
    <button onclick="signup()" style="width:100%; background:none; border:none; color:var(--primary); margin-top:10px; cursor:pointer;">Create Account</button>
    <button onclick="closeLogin()" style="width:100%; background:none; border:none; color:#888; margin-top:10px; cursor:pointer;">Close</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig={
apiKey:"AIzaSyCax6078YpxQU0kHIChQLuEmpLUYXSxQr4",
authDomain:"e-commerce-wepsite.firebaseapp.com",
projectId:"e-commerce-wepsite",
storageBucket:"e-commerce-wepsite.appspot.com",
messagingSenderId:"394408704286",
appId:"1:394408704286:web:9ad690a946b225ab20f10f"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const auth=firebase.auth();

// Slider logic
let slideIdx = 0;
function showSlides() {
    let slides = document.querySelectorAll(".banner-slide");
    slides.forEach(s => s.classList.remove("active"));
    slideIdx++;
    if (slideIdx > slides.length) slideIdx = 1;
    slides[slideIdx-1].classList.add("active");
    setTimeout(showSlides, 3000);
}
showSlides();

auth.onAuthStateChanged(user=>{
    const loginBtn=document.getElementById("loginBtn");
    const userInfo=document.getElementById("userInfo");
    if(user && user.email !== "sureshrajagunam24@gmail.com"){
        loginBtn.style.display="none";
        userInfo.style.display="block";
        document.getElementById("userLetter").innerText = user.email.charAt(0).toUpperCase();
        document.getElementById("userName").innerText = user.email.split('@')[0].toUpperCase();
    } else {
        loginBtn.style.display="block";
        userInfo.style.display="none";
    }
});

function openProfile() {
    document.getElementById("profileSidebar").style.right = "0";
    const user = auth.currentUser;
    document.getElementById("sideLetter").innerText = user.email.charAt(0).toUpperCase();
    db.collection("users").doc(user.uid).get().then(doc => {
        if(doc.exists) {
            document.getElementById("sideName").value = doc.data().name || "";
            document.getElementById("sideMobile").value = doc.data().mobile || "";
            document.getElementById("sideAddress").value = doc.data().address || "";
        }
    });
}
function closeProfile() { document.getElementById("profileSidebar").style.right = "-350px"; }
function saveProfile() {
    const user = auth.currentUser;
    const name = document.getElementById("sideName").value;
    const mobile = document.getElementById("sideMobile").value;
    const address = document.getElementById("sideAddress").value;
    db.collection("users").doc(user.uid).set({name, mobile, address, email:user.email}, {merge:true}).then(() => alert("Saved âœ…"));
}
function openLogin() { document.getElementById("loginBox").style.display="block"; }
function closeLogin() { document.getElementById("loginBox").style.display="none"; }
function login() {
    auth.signInWithEmailAndPassword(document.getElementById("email").value, document.getElementById("password").value)
    .then(() => location.reload()).catch(err => alert(err.message));
}
function signup() {
    auth.createUserWithEmailAndPassword(document.getElementById("email").value, document.getElementById("password").value)
    .then(() => { alert("Account Created âœ…"); location.reload(); }).catch(err => alert(err.message));
}

db.collection("products").onSnapshot(snapshot=>{
    const list=document.getElementById("product-list");
    list.innerHTML="";
    snapshot.forEach(doc=>{
        const data=doc.data();
        list.innerHTML+=`
        <div class="product-card">
            <img src="${data.imageUrl}">
            <div style="padding:10px;">
                <h3>${data.productName}</h3>
                <p>â‚¹${data.price}</p>
                <button style="background:var(--dark); color:#fff; border:none; padding:10px; width:100%; cursor:pointer;" onclick="buyNow('${doc.id}','${data.productName}',${data.price},'${data.imageUrl}')">BUY NOW</button>
            </div>
        </div>`;
    });
});

window.buyNow = function(id, name, price, image) {
    const user = auth.currentUser;
    if(!user) { openLogin(); return; }
    db.collection("users").doc(user.uid).get().then(doc => {
        if(!doc.exists || !doc.data().address) { alert("Please update address in Profile!"); openProfile(); return; }
        db.collection("orders").add({
            user: user.email, buyerName: doc.data().name, buyerAddress: doc.data().address, 
            productName: name, price, imageUrl: image, createdAt: firebase.firestore.FieldValue.serverTimestamp()
        }).then(() => alert("Order Placed âœ…"));
    });
}
</script>
</body>
</html>
