<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy } 
from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyCax6078YpxQU0kHIChQLuEmpLUYXSxQr4",
    authDomain: "e-commerce-wepsite.firebaseapp.com",
    projectId: "e-commerce-wepsite",
    storageBucket: "e-commerce-wepsite.appspot.com",
    messagingSenderId: "394408704286",
    appId: "1:394408704286:web:9ad690a946b225ab20f10f"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function loadProducts(){
    try{
        const q = query(collection(db,"products"), orderBy("createdAt","desc"));
        const snapshot = await getDocs(q);
        const list = document.getElementById("product-list");
        list.innerHTML="";

        snapshot.forEach((doc)=>{
            const data=doc.data();
            list.innerHTML+=`
            <div class="product-card">
                <img src="${data.imageUrl}">
                <h3>${data.productName}</h3>
                <p style="font-weight:bold;font-size:20px;">₹${data.price}</p>
                <button class="buy-btn" onclick="placeOrder('${data.productName}')">
                Buy Now
                </button>
            </div>
            `;
        });

    }catch(err){
        console.log(err);
    }
}

window.placeOrder = function(name){
    alert("Order placed for "+name+" ✅");
}

loadProducts();
</script>
