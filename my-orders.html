<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My Orders - Loyal Fashion</title>

<style>
body{font-family:Segoe UI;background:#f4f6f9;margin:0}
.header{background:#000;color:#fff;padding:15px 30px;display:flex;justify-content:space-between;align-items:center}
.order-container{padding:30px}
.order-card{
background:#fff;
padding:15px;
margin-bottom:15px;
border-radius:10px;
display:flex;
gap:15px;
align-items:center;
box-shadow:0 5px 10px rgba(0,0,0,0.05)
}
.order-card img{
width:80px;
height:80px;
object-fit:cover;
border-radius:8px
}
.price{font-weight:bold;color:green}
</style>
</head>

<body>

<div class="header">
<h2>ðŸ“¦ My Orders</h2>
<div>
<button onclick="window.location.href='index.html'">Home</button>
<button onclick="logout()">Logout</button>
</div>
</div>

<div class="order-container" id="orderList">
<p>Loading Orders...</p>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig={
apiKey:"AIzaSyCax6078YpxQU0kHIChQLuEmpLUYXSxQr4",
authDomain:"e-commerce-wepsite.firebaseapp.com",
projectId:"e-commerce-wepsite",
storageBucket:"e-commerce-wepsite.appspot.com",
messagingSenderId:"394408704286",
appId:"1:394408704286:web:9ad690a946b225ab20f10f"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const auth=firebase.auth();

const orderList=document.getElementById("orderList");

/* AUTH CHECK */
auth.onAuthStateChanged(user=>{
if(!user){
alert("Please Login First");
window.location.href="index.html";
return;
}

loadOrders(user.email);
});

/* LOAD ORDERS */
function loadOrders(email){

db.collection("orders")
.where("user","==",email)
.orderBy("createdAt","desc")
.onSnapshot(snapshot=>{

orderList.innerHTML="";

if(snapshot.empty){
orderList.innerHTML="<p>No Orders Yet.</p>";
return;
}

snapshot.forEach(doc=>{
const data=doc.data();

orderList.innerHTML+=`
<div class="order-card">
<img src="${data.imageUrl || 'image.png'}">
<div>
<h3>${data.productName}</h3>
<p class="price">â‚¹${data.price}</p>
<p>${data.createdAt?.toDate().toLocaleString() || ''}</p>
</div>
</div>
`;
});

});
}

/* LOGOUT */
function logout(){
auth.signOut();
alert("Logged Out");
window.location.href="index.html";
}
</script>

</body>
</html>
